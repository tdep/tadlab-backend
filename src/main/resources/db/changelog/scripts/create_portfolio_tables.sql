--changeset tdep:1
create type "entry_types" as enum (
    'JOB',
    'PROJECT',
    'CONTACT',
    'LINK',
    'TOOL'
);

create type "url_types" as enum (
    'IMAGE',
    'GITHUB',
    'DEMO',
    'LINKEDIN',
    'EXTERNAL_PORTFOLIO'
);

create table if not exists "portfolio_entries" (
    id smallint not null generated by default as identity,
    name varchar(255) not null,
    entry_type entry_types,
    primary key (id)
);

create table if not exists "urls" (
    id smallint not null generated by default as identity,
    name varchar(255) not null,
    url varchar(1024) not null,
    url_type url_types,
    primary key (id)
);

create table if not exists "portfolio_entry_urls" (
    portfolio_entry_id smallint not null references portfolio_entries (id),
    url_id smallint not null references urls (id),
    constraint portfolio_entry_urls_pk primary key (portfolio_entry_id, url_id)
);